#!/bin/bash
# Football Prediction System - Main Command
# Usage: fb <command> [options]
# Examples:
#   fb predict https://www.forebet.com/... 
#   fb https://www.forebet.com/... (shortcut for predict)
#   fb result <url> <actual_result>
#   fb train [status|force]
#
# NOTE: If the URL contains special characters like parentheses (), 
#       you must quote it:
#   fb "https://www.forebet.com/en/football/matches/team1-team2-(slv)-123456"

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
VENV_DIR="${SCRIPT_DIR}/football_env"
MAIN="${SCRIPT_DIR}/football_prediction_system.py"

if [ ! -d "$VENV_DIR" ]; then
    echo "Error: Virtual environment not found at $VENV_DIR"
    exit 1
fi

if [ ! -f "$MAIN" ]; then
    echo "Error: football_prediction_system.py not found"
    exit 1
fi

# If first argument looks like a URL, treat it as predict command
if [[ "$1" == http://* ]] || [[ "$1" == https://* ]]; then
    "$VENV_DIR/bin/python" "$MAIN" predict --url "$1" "${@:2}"
else
    "$VENV_DIR/bin/python" "$MAIN" "$@"
fi
